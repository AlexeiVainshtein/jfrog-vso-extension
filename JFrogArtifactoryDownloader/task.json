{
  "id": "07fc5c20-6772-11e5-abde-6401d3d00465",
  "name": "JFrogArtifactoryDownloader",
  "friendlyName": "JFrog Artifactory Downloader",
  "description": " This task helps you to download artifacts published to Artifactory during a build",
  "author": "jfrog",
  "helpMarkDown": "Download Artifacts linked to a build from Artifactory.",
  "category": "Utility",
  "visibility": [
    "Build",
    "Release"
  ],
  "demands": [],
  "version": {
    "Major": "1",
    "Minor": "2",
    "Patch": "0"
  },
  "minimumAgentVersion": "1.83.0",
  "instanceNameFormat": "JFrogArtifactoryDownloader $(message)",
  "inputs": [
    {
      "name": "artifactoryEndpointName",
      "type": "connectedService:Generic",
      "label": "Artifactory URL",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Artifactory URL to download your artifacts from."
    },
    {
      "name": "overrideCredentials",
      "type": "boolean",
      "label": "Override Credentials",
      "defaultValue": "false",
      "required": false,
      "helpMarkDown": "Override credentials given in service configuration."
    },
    {
      "name": "login",
      "type": "string",
      "label": "User Login",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "User with permissions to deploy to the selected Artifactory repository"
    },
    {
      "name": "password",
      "type": "string",
      "label": "User Encrypted Password",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Password for the user entered above. Note: It is higly recommended to use an encrypted password so that your password is never passed in clear text to Artifactory."
    },
    {
      "name": "buildName",
      "type": "string",
      "label": "Build Name.",
      "defaultValue": "",
      "required": true,
      "helpMarkDown" : "Build name in JFrog Artifactory."
    },
    {
      "name": "BuildNumberInput",
      "type": "string",
      "label": "Build Number",
      "defaultValue": "",
      "required": false,
      "helpMarkDown" : "Build number in JFrog Artifactory. If not provided the task will use current build number from environment variables. If BUILD_BUILDNUMBER variable not available in context will use the latest from Artifactory"
    },
    {
      "name": "buildStatus",
      "type": "string",
      "label": "Build Status",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Status of the build you are looking for. The task will download all artifacts linked to the latest build with the defined status. If empty and the task is triggered by a build the task will download artifacts generated by this one. If not it will download the latest" 
    },
    {
      "name": "destinationFolder",
      "type": "string",
      "label": "Destination folder",
      "defaultValue": "",
      "required": false,
      "helpMarkDown": "Destination folder to download the artifacts.zip file. Will use $env:TEMP if empty." 
    }
  ],
  "execution": {
    "PowerShell": {
      "target": "$(currentDirectory)\\ArtifactoryDownload.ps1",
      "argumentFormat": "",
      "workingDirectory": "$(currentDirectory)"
    }
  }
}
